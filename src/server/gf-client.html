<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="translator.css" />
    <script type="text/javascript" src="gf-server-jsapi.js"></script>
    <script type="text/javascript" src="translator.js"></script>
    <script type="text/javascript">
     function updateTranslation () {
        var input = document.getElementById('inputText').value;
        var fromLang = document.getElementById('fromLang').value;
        var toLang = document.getElementById('toLang').value;
        var output = document.getElementById('output');
        var callback = function(translation) {
                         removeChildren(output);
                         output.appendChild(formatTranslation(translation));
                       };
        gf.translate(input, fromLang, toLang, '', callback);
      }

      function populateLangs (langs) {
        var f = document.getElementById('fromLang');
        var t = document.getElementById('toLang');
        for (var i in langs) {
          if (langs[i].canParse) {
            addOption(f, i, i);
          }
          addOption(t, i, i);
        }
      }

      function initialize() {
        gf.getLanguages(populateLangs);
      }
    </script>
    <title>AJAX GF Translator</title>
  </head>
  <body onload="initialize()">
    <form id="translate">
      <p>
        <input type="text" name="inputText" id="inputText" value="this cheese is warm" size="50" />
      </p>
      <p>
        From: <select name="fromLang" id="fromLang" onchange=""><option value="">Any language</option></select>
        To: <select name="toLang" id="toLang"><option value="">All languages</option></select>
        <input type="button" value="Translate" onclick="updateTranslation();" />
      </p>
    </form>
    <div id="output"></div>
  </body>
</html>
